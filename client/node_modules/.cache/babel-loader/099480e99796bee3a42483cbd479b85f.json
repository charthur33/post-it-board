{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useContext}from'react';import{useNavigate,Link}from\"react-router-dom\";import axios from\"axios\";import UserContext from\"../../context/userContext.js\";import ErrorNotice from\"../../components/misc/ErrorNotice.jsx\";import LoginHeader from'../layout/LoginHeader.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var navigate=useNavigate();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var loginUser,loginResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;loginUser={username:username,password:password};_context.next=5;return axios.post(\"http://localhost:5000/users/login\",loginUser);case 5:loginResponse=_context.sent;setUserData({token:loginResponse.data.token,user:loginResponse.data.user,displayname:loginResponse.data.user.displayname});localStorage.setItem(\"auth-token\",loginResponse.data.token);navigate(\"/\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LoginHeader,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"access-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),error&&/*#__PURE__*/_jsx(ErrorNotice,{message:error,clearError:function clearError(){return setError(undefined);}}),/*#__PURE__*/_jsx(\"form\",{onSubmit:submit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-register-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",placeHolder:\"Type your username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",placeHolder:\"Type your password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"login-register-btn\",type:\"submit\",children:\"Login\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"link\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})})]})]});}export default Login;","map":{"version":3,"sources":["C:/Users/cwill/OneDrive/Desktop/post-it-app/client/src/components/auth/Login.jsx"],"names":["React","useState","useContext","useNavigate","Link","axios","UserContext","ErrorNotice","LoginHeader","Login","username","setUsername","password","setPassword","error","setError","setUserData","navigate","submit","e","preventDefault","loginUser","post","loginResponse","token","data","user","displayname","localStorage","setItem","response","msg","undefined","target","value"],"mappings":"8bAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,WAAT,CAAsBC,IAAtB,KAAkC,kBAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uCAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,C,wFAEA,QAASC,CAAAA,KAAT,EAAiB,CACb,cAAgCR,QAAQ,EAAxC,wCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAAgCV,QAAQ,EAAxC,yCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAA0BZ,QAAQ,EAAlC,yCAAOa,KAAP,eAAcC,QAAd,eACA,gBAAwBb,UAAU,CAACI,WAAD,CAAlC,CAAQU,WAAR,aAAQA,WAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,CAAAA,MAAM,0FAAG,iBAAOC,CAAP,8IACXA,CAAC,CAACC,cAAF,GADW,gBAGDC,SAHC,CAGW,CAAEX,QAAQ,CAARA,QAAF,CAAYE,QAAQ,CAARA,QAAZ,CAHX,uBAIqBP,CAAAA,KAAK,CAACiB,IAAN,CAAW,mCAAX,CAAgDD,SAAhD,CAJrB,QAIDE,aAJC,eAKPP,WAAW,CAAC,CACRQ,KAAK,CAAED,aAAa,CAACE,IAAd,CAAmBD,KADlB,CAERE,IAAI,CAAEH,aAAa,CAACE,IAAd,CAAmBC,IAFjB,CAGRC,WAAW,CAAEJ,aAAa,CAACE,IAAd,CAAmBC,IAAnB,CAAwBC,WAH7B,CAAD,CAAX,CAKAC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCN,aAAa,CAACE,IAAd,CAAmBD,KAAtD,EACAP,QAAQ,CAAC,GAAD,CAAR,CAXO,iFAaP,YAAIa,QAAJ,CAAaL,IAAb,CAAkBM,GAAlB,EAAyBhB,QAAQ,CAAC,YAAIe,QAAJ,CAAaL,IAAb,CAAkBM,GAAnB,CAAjC,CAbO,qEAAH,kBAANb,CAAAA,MAAM,4CAAZ,CAgBA,mBACI,oCACI,KAAC,WAAD,IADJ,cAEI,aAAK,SAAS,CAAC,aAAf,wBACI,6BADJ,CAEKJ,KAAK,eAAI,KAAC,WAAD,EAAa,OAAO,CAAEA,KAAtB,CAA6B,UAAU,CAAE,4BAAMC,CAAAA,QAAQ,CAACiB,SAAD,CAAd,EAAzC,EAFd,cAGI,aAAM,QAAQ,CAAEd,MAAhB,uBACI,aAAK,SAAS,CAAC,sBAAf,wBACI,qCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,UAAtB,CAAiC,WAAW,CAAC,oBAA7C,CAAkE,QAAQ,CAAE,kBAAAC,CAAC,QAAIR,CAAAA,WAAW,CAACQ,CAAC,CAACc,MAAF,CAASC,KAAV,CAAf,EAA7E,EAFJ,cAGI,qCAHJ,cAII,cAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAC,UAA1B,CAAqC,WAAW,CAAC,oBAAjD,CAAsE,QAAQ,CAAE,kBAAAf,CAAC,QAAIN,CAAAA,WAAW,CAACM,CAAC,CAACc,MAAF,CAASC,KAAV,CAAf,EAAjF,EAJJ,cAKI,eAAQ,SAAS,CAAC,oBAAlB,CAAuC,IAAI,CAAC,QAA5C,mBALJ,GADJ,EAHJ,cAYI,YAAK,SAAS,CAAC,MAAf,uBACI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,qBADJ,EAZJ,GAFJ,GADJ,CAqBH,CACD,cAAezB,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"../../context/userContext.js\";\r\nimport ErrorNotice from \"../../components/misc/ErrorNotice.jsx\";\r\nimport LoginHeader from '../layout/LoginHeader.jsx';\r\n\r\nfunction Login() {\r\n    const [username, setUsername] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [error, setError] = useState();\r\n    const { setUserData } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const loginUser = { username, password };\r\n            const loginResponse = await axios.post(\"http://localhost:5000/users/login\", loginUser);\r\n            setUserData({\r\n                token: loginResponse.data.token,\r\n                user: loginResponse.data.user,\r\n                displayname: loginResponse.data.user.displayname\r\n            });\r\n            localStorage.setItem(\"auth-token\", loginResponse.data.token);\r\n            navigate(\"/\");\r\n        } catch (err) {\r\n            err.response.data.msg && setError(err.response.data.msg)\r\n        }\r\n    };\r\n    return (\r\n        <div>\r\n            <LoginHeader />\r\n            <div className=\"access-page\">\r\n                <h1>Login</h1>\r\n                {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\r\n                <form onSubmit={submit}>\r\n                    <div className=\"login-register-input\">\r\n                        <label>Username: </label>\r\n                        <input type=\"text\" id=\"username\" placeHolder=\"Type your username\" onChange={e => setUsername(e.target.value)} />\r\n                        <label>Password: </label>\r\n                        <input type=\"password\" id=\"password\" placeHolder=\"Type your password\" onChange={e => setPassword(e.target.value)} />\r\n                        <button className=\"login-register-btn\" type=\"submit\">Login</button>\r\n                    </div>\r\n                </form>\r\n                <div className=\"link\">\r\n                    <Link to=\"/\">Go Back</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}