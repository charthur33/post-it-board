{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useContext}from'react';import{useNavigate,Link}from\"react-router-dom\";import axios from\"axios\";import UserContext from\"../../context/userContext\";import ErrorNotice from\"../../components/misc/ErrorNotice\";import LoginHeader from'../layout/LoginHeader.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),displayname=_useState4[0],setDisplayname=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),passwordCheck=_useState8[0],setPasswordCheck=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useContext=useContext(UserContext),setUserData=_useContext.setUserData;var navigate=useNavigate();var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newUser,loginResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;newUser={username:username,displayname:displayname,password:password,passwordCheck:passwordCheck};_context.next=5;return axios.post(\"http://localhost:5000/users/register\",newUser);case 5:_context.next=7;return axios.post(\"http://localhost:5000/users/login\",{username:username,password:password});case 7:loginResponse=_context.sent;setUserData({token:loginResponse.data.token,user:loginResponse.data.user});localStorage.setItem(\"auth-token\",loginResponse.data.token);navigate(\"/\");_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);_context.t0.response.data.msg&&setError(_context.t0.response.data.msg);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LoginHeader,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"access-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),error&&/*#__PURE__*/_jsx(ErrorNotice,{message:error,clearError:function clearError(){return setError(undefined);}}),/*#__PURE__*/_jsx(\"form\",{onSubmit:submit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-register-input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeHolder:\"Type your username\",id:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Display Name:  \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeHolder:\"Type a display name\",id:\"displayname\",onChange:function onChange(e){return setDisplayname(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeHolder:\"Type your password\",id:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeHolder:\"Confirm your password\",onChange:function onChange(e){return setPasswordCheck(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"login-register-btn\",type:\"submit\",children:\"Register\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"link\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})})]})]});}export default Register;","map":{"version":3,"sources":["C:/Users/cwill/OneDrive/Desktop/post-it-app/client/src/components/auth/Register.jsx"],"names":["React","useState","useContext","useNavigate","Link","axios","UserContext","ErrorNotice","LoginHeader","Register","username","setUsername","displayname","setDisplayname","password","setPassword","passwordCheck","setPasswordCheck","error","setError","setUserData","navigate","submit","e","preventDefault","newUser","post","loginResponse","token","data","user","localStorage","setItem","response","msg","undefined","target","value"],"mappings":"8bAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,WAAT,CAAsBC,IAAtB,KAAkC,kBAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,C,wFAEA,QAASC,CAAAA,QAAT,EAAoB,CAChB,cAAgCR,QAAQ,EAAxC,wCAAOS,QAAP,eAAiBC,WAAjB,eACA,eAAsCV,QAAQ,EAA9C,yCAAOW,WAAP,eAAoBC,cAApB,eACA,eAAgCZ,QAAQ,EAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eACA,eAA0Cd,QAAQ,EAAlD,yCAAOe,aAAP,eAAsBC,gBAAtB,eACA,eAA0BhB,QAAQ,EAAlC,0CAAOiB,KAAP,gBAAcC,QAAd,gBACA,gBAAwBjB,UAAU,CAACI,WAAD,CAAlC,CAAQc,WAAR,aAAQA,WAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CACA,GAAMmB,CAAAA,MAAM,0FAAG,iBAAOC,CAAP,4IACXA,CAAC,CAACC,cAAF,GADW,gBAGDC,OAHC,CAGS,CAAEf,QAAQ,CAARA,QAAF,CAAYE,WAAW,CAAXA,WAAZ,CAAyBE,QAAQ,CAARA,QAAzB,CAAmCE,aAAa,CAAbA,aAAnC,CAHT,uBAIDX,CAAAA,KAAK,CAACqB,IAAN,CAAW,sCAAX,CAAmDD,OAAnD,CAJC,8BAKqBpB,CAAAA,KAAK,CAACqB,IAAN,CAAW,mCAAX,CAAgD,CACxEhB,QAAQ,CAARA,QADwE,CAC9DI,QAAQ,CAARA,QAD8D,CAAhD,CALrB,QAKDa,aALC,eAQPP,WAAW,CAAC,CACRQ,KAAK,CAAED,aAAa,CAACE,IAAd,CAAmBD,KADlB,CAERE,IAAI,CAAEH,aAAa,CAACE,IAAd,CAAmBC,IAFjB,CAAD,CAAX,CAIAC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCL,aAAa,CAACE,IAAd,CAAmBD,KAAtD,EACAP,QAAQ,CAAC,GAAD,CAAR,CAbO,iFAeP,YAAIY,QAAJ,CAAaJ,IAAb,CAAkBK,GAAlB,EAAyBf,QAAQ,CAAC,YAAIc,QAAJ,CAAaJ,IAAb,CAAkBK,GAAnB,CAAjC,CAfO,qEAAH,kBAANZ,CAAAA,MAAM,4CAAZ,CAkBA,mBACI,oCACI,KAAC,WAAD,IADJ,cAEI,aAAK,SAAS,CAAC,aAAf,wBACI,gCADJ,CAEKJ,KAAK,eAAI,KAAC,WAAD,EAAa,OAAO,CAAEA,KAAtB,CAA6B,UAAU,CAAE,4BAAMC,CAAAA,QAAQ,CAACgB,SAAD,CAAd,EAAzC,EAFd,cAGI,aAAM,QAAQ,CAAEb,MAAhB,uBACI,aAAK,SAAS,CAAC,sBAAf,wBACI,qCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,oBAA/B,CAAoD,EAAE,CAAC,UAAvD,CAAkE,QAAQ,CAAE,kBAAAC,CAAC,QAAIZ,CAAAA,WAAW,CAACY,CAAC,CAACa,MAAF,CAASC,KAAV,CAAf,EAA7E,EAFJ,cAGI,0CAHJ,cAII,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,qBAA/B,CAAqD,EAAE,CAAC,aAAxD,CAAsE,QAAQ,CAAE,kBAAAd,CAAC,QAAIV,CAAAA,cAAc,CAACU,CAAC,CAACa,MAAF,CAASC,KAAV,CAAlB,EAAjF,EAJJ,cAKI,qCALJ,cAMI,cAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,oBAAnC,CAAwD,EAAE,CAAC,UAA3D,CAAsE,QAAQ,CAAE,kBAAAd,CAAC,QAAIR,CAAAA,WAAW,CAACQ,CAAC,CAACa,MAAF,CAASC,KAAV,CAAf,EAAjF,EANJ,cAOI,6CAPJ,cAQI,cAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,uBAAnC,CAA2D,QAAQ,CAAE,kBAAAd,CAAC,QAAIN,CAAAA,gBAAgB,CAACM,CAAC,CAACa,MAAF,CAASC,KAAV,CAApB,EAAtE,EARJ,cASI,eAAQ,SAAS,CAAC,oBAAlB,CAAuC,IAAI,CAAC,QAA5C,sBATJ,GADJ,EAHJ,cAgBI,YAAK,SAAS,CAAC,MAAf,uBACI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,qBADJ,EAhBJ,GAFJ,GADJ,CAyBH,CACD,cAAe5B,CAAAA,QAAf","sourcesContent":["import React, { useState, useContext } from 'react';\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"../../context/userContext\";\r\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\r\nimport LoginHeader from '../layout/LoginHeader.jsx';\r\n\r\nfunction Register() {\r\n    const [username, setUsername] = useState();\r\n    const [displayname, setDisplayname] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [passwordCheck, setPasswordCheck] = useState();\r\n    const [error, setError] = useState();\r\n    const { setUserData } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const newUser = { username, displayname, password, passwordCheck };\r\n            await axios.post(\"http://localhost:5000/users/register\", newUser);\r\n            const loginResponse = await axios.post(\"http://localhost:5000/users/login\", {\r\n                username, password\r\n            });\r\n            setUserData({\r\n                token: loginResponse.data.token,\r\n                user: loginResponse.data.user\r\n            });\r\n            localStorage.setItem(\"auth-token\", loginResponse.data.token);\r\n            navigate(\"/\");\r\n        } catch (err) {\r\n            err.response.data.msg && setError(err.response.data.msg)\r\n        }\r\n    };\r\n    return (\r\n        <div>\r\n            <LoginHeader />\r\n            <div className=\"access-page\">\r\n                <h1>Register</h1>\r\n                {error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\r\n                <form onSubmit={submit}>\r\n                    <div className=\"login-register-input\">\r\n                        <label>Username: </label>\r\n                        <input type=\"text\" placeHolder=\"Type your username\" id=\"username\" onChange={e => setUsername(e.target.value)} />\r\n                        <label>Display Name:  </label>\r\n                        <input type=\"text\" placeHolder=\"Type a display name\" id=\"displayname\" onChange={e => setDisplayname(e.target.value)} />\r\n                        <label>Password: </label>\r\n                        <input type=\"password\" placeHolder=\"Type your password\" id=\"password\" onChange={e => setPassword(e.target.value)} />\r\n                        <label>Confirm Password: </label>\r\n                        <input type=\"password\" placeHolder=\"Confirm your password\" onChange={e => setPasswordCheck(e.target.value)} />\r\n                        <button className=\"login-register-btn\" type=\"submit\">Register</button>\r\n                    </div>\r\n                </form>\r\n                <div className=\"link\">\r\n                    <Link to=\"/\">Go Back</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}