{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\cwill\\\\OneDrive\\\\Desktop\\\\post-it-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import{BrowserRouter,Routes,Route}from'react-router-dom';import axios from'axios';import Login from\"./auth/Login.jsx\";import Register from\"./auth/Register.jsx\";import UserContext from\"../context/userContext\";import Home from\"./Home.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState({token:undefined,user:undefined}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];useEffect(function(){var checkLoggedIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,tokenResponse,userRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"auth-token\");if(token===null){localStorage.setItem(\"auth-token\",\"\");token=\"\";}_context.next=4;return axios.post('http://localhost:5000/users/tokenIsValid',null,{headers:{\"x-auth-token\":token}});case 4:tokenResponse=_context.sent;if(!tokenResponse.data){_context.next=10;break;}_context.next=8;return axios.get(\"http://localhost:5000/users/\",{headers:{\"x-auth-token\":token}});case 8:userRes=_context.sent;setUserData({token:token,user:userRes.data});case 10:case\"end\":return _context.stop();}}},_callee);}));return function checkLoggedIn(){return _ref.apply(this,arguments);};}();checkLoggedIn();},[]);return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(UserContext.Provider,{value:{userData:userData,setUserData:setUserData},children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})})]})})});}export default App;","map":{"version":3,"sources":["C:/Users/cwill/OneDrive/Desktop/post-it-app/client/src/components/App.js"],"names":["React","useState","useEffect","BrowserRouter","Routes","Route","axios","Login","Register","UserContext","Home","App","token","undefined","user","userData","setUserData","checkLoggedIn","localStorage","getItem","setItem","post","headers","tokenResponse","data","get","userRes"],"mappings":"8bAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,aAAT,CAAwBC,MAAxB,CAAgCC,KAAhC,KAA6C,kBAA7C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,kBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,qBAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CAEX,cAAgCV,QAAQ,CAAC,CACrCW,KAAK,CAAEC,SAD8B,CAErCC,IAAI,CAAED,SAF+B,CAAD,CAAxC,wCAAOE,QAAP,eAAiBC,WAAjB,eAKAd,SAAS,CAAC,UAAM,CACZ,GAAMe,CAAAA,aAAa,0FAAG,mKACdL,KADc,CACNM,YAAY,CAACC,OAAb,CAAqB,YAArB,CADM,CAElB,GAAIP,KAAK,GAAK,IAAd,CAAoB,CAChBM,YAAY,CAACE,OAAb,CAAqB,YAArB,CAAmC,EAAnC,EACAR,KAAK,CAAG,EAAR,CACH,CALiB,sBAMUN,CAAAA,KAAK,CAACe,IAAN,CAAW,0CAAX,CAAuD,IAAvD,CAA6D,CAAEC,OAAO,CAAE,CAAE,eAAgBV,KAAlB,CAAX,CAA7D,CANV,QAMZW,aANY,mBAOdA,aAAa,CAACC,IAPA,gDAQQlB,CAAAA,KAAK,CAACmB,GAAN,CAAU,8BAAV,CAA0C,CAC5DH,OAAO,CAAE,CAAE,eAAgBV,KAAlB,CADmD,CAA1C,CARR,QAQRc,OARQ,eAWdV,WAAW,CAAC,CACRJ,KAAK,CAALA,KADQ,CAERE,IAAI,CAAEY,OAAO,CAACF,IAFN,CAAD,CAAX,CAXc,uDAAH,kBAAbP,CAAAA,aAAa,0CAAnB,CAiBAA,aAAa,GAChB,CAnBQ,CAmBN,EAnBM,CAAT,CAqBA,mBACI,KAAC,aAAD,wBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEF,QAAQ,CAARA,QAAF,CAAYC,WAAW,CAAXA,WAAZ,CAA7B,uBACI,MAAC,MAAD,yBACI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,OAAO,cAAE,KAAC,IAAD,IAA/B,EADJ,cAEI,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,OAAO,cAAE,KAAC,QAAD,IAAjC,EAFJ,cAGI,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAAE,KAAC,KAAD,IAA9B,EAHJ,GADJ,EADJ,EADJ,CAYH,CAED,cAAeL,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport Login from \"./auth/Login.jsx\";\r\nimport Register from \"./auth/Register.jsx\";\r\nimport UserContext from \"../context/userContext\";\r\nimport Home from \"./Home.jsx\";\r\n\r\nfunction App() {\r\n\r\n    const [userData, setUserData] = useState({\r\n        token: undefined,\r\n        user: undefined\r\n    });\r\n\r\n    useEffect(() => {\r\n        const checkLoggedIn = async () => {\r\n            let token = localStorage.getItem(\"auth-token\");\r\n            if (token === null) {\r\n                localStorage.setItem(\"auth-token\", \"\");\r\n                token = \"\";\r\n            }\r\n            const tokenResponse = await axios.post('http://localhost:5000/users/tokenIsValid', null, { headers: { \"x-auth-token\": token } });\r\n            if (tokenResponse.data) {\r\n                const userRes = await axios.get(\"http://localhost:5000/users/\", {\r\n                    headers: { \"x-auth-token\": token },\r\n                });\r\n                setUserData({\r\n                    token,\r\n                    user: userRes.data,\r\n                });\r\n            }\r\n        }\r\n        checkLoggedIn();\r\n    }, []);\r\n\r\n    return (\r\n        <BrowserRouter>\r\n            <UserContext.Provider value={{ userData, setUserData }}>\r\n                <Routes>\r\n                    <Route exact path=\"/\" element={<Home />} />\r\n                    <Route path=\"/register\" element={<Register/>} />\r\n                    <Route path=\"/login\" element={<Login />} />\r\n                </Routes>\r\n            </UserContext.Provider>\r\n        </BrowserRouter>\r\n    );\r\n\r\n}\r\n\r\nexport default App; "]},"metadata":{},"sourceType":"module"}